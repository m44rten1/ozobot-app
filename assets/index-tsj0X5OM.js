(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))h(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&h(f)}).observe(document,{childList:!0,subtree:!0});function c(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function h(o){if(o.ep)return;o.ep=!0;const r=c(o);fetch(o.href,r)}})();const i=document.getElementById("drawing-canvas"),n=i.getContext("2d"),v=document.querySelectorAll(".color-option"),L=document.getElementById("undo-btn"),x=document.getElementById("clear-btn"),b=document.getElementById("fullscreen-btn");let d=!1,l="black",u=15,s=[],a=[];function y(){i.width=window.innerWidth,i.height=window.innerHeight,w()}function S(){y(),n.fillStyle="white",n.fillRect(0,0,i.width,i.height),n.lineJoin="round",n.lineCap="round",n.lineWidth=u,n.strokeStyle=l}function w(){n.fillStyle="white",n.fillRect(0,0,i.width,i.height),s.forEach(e=>{if(e.length>0){n.beginPath(),n.strokeStyle=e[0].color,n.lineWidth=e[0].width,n.moveTo(e[0].x,e[0].y);for(let t=1;t<e.length;t++)n.lineTo(e[t].x,e[t].y);n.stroke()}})}function g(e){d=!0,a=[];const t=E(e);a.push({x:t.x,y:t.y,color:l,width:u}),n.beginPath(),n.strokeStyle=l,n.lineWidth=u,n.moveTo(t.x,t.y)}function p(e){if(!d)return;const t=E(e);a.push({x:t.x,y:t.y,color:l,width:u}),n.lineTo(t.x,t.y),n.stroke()}function m(){d&&(d=!1,s.push([...a]),n.closePath())}function E(e){let t,c;return e.type.includes("touch")?(t=e.touches[0].clientX,c=e.touches[0].clientY):(t=e.clientX,c=e.clientY),{x:t,y:c}}function P(e){l=e,v.forEach(t=>{t.classList.remove("active"),t.dataset.color===e&&t.classList.add("active")})}function O(){s.length>0&&(s.pop(),w())}function B(){s=[],n.fillStyle="white",n.fillRect(0,0,i.width,i.height)}function C(){if(!document.fullscreenElement)document.documentElement.requestFullscreen().catch(e=>{console.log(`Standard fullscreen failed, likely on iOS: ${e.message}`),document.documentElement.classList.add("ios-fullscreen");const t=document.querySelector("meta[name=viewport]");t&&t.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover")});else{document.exitFullscreen&&document.exitFullscreen(),document.documentElement.classList.remove("ios-fullscreen");const e=document.querySelector("meta[name=viewport]");e&&e.setAttribute("content","width=device-width, initial-scale=1.0")}}window.addEventListener("resize",y);i.addEventListener("mousedown",g);i.addEventListener("mousemove",p);i.addEventListener("mouseup",m);i.addEventListener("mouseout",m);i.addEventListener("touchstart",e=>{e.preventDefault(),g(e)});i.addEventListener("touchmove",e=>{e.preventDefault(),p(e)});i.addEventListener("touchend",m);L.addEventListener("click",O);x.addEventListener("click",B);b.addEventListener("click",C);v.forEach(e=>{e.addEventListener("click",()=>{P(e.dataset.color)})});S();
